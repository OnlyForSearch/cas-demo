/*
 * Compressed by JSA(www.xidea.org)
 */
(function($){$.fn.ajaxSubmit=function(K){if(!this.length){_("ajaxSubmit: skipping submit process - no element selected");return this}if(typeof K=="function")K={success:K};K=$.extend({url:this.attr("action")||window.location.toString(),type:this.attr("method")||"GET"},K||{});var B={};this.trigger("form-pre-serialize",[this,K,B]);if(B.veto){_("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}var D=this.formToArray(K.semantic);if(K.data){K.extraData=K.data;for(var E in K.data)D.push({name:E,value:K.data[E]})}if(K.beforeSubmit&&K.beforeSubmit(D,this,K)===false){_("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[D,this,K,B]);if(B.veto){_("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var H=$.param(D);if(K.type.toUpperCase()=="GET"){K.url+=(K.url.indexOf("?")>=0?"&":"?")+H;K.data=null}else K.data=H;var F=this,I=[];if(K.resetForm)I.push(function(){F.resetForm()});if(K.clearForm)I.push(function(){F.clearForm()});if(!K.dataType&&K.target){var J=K.success||function(){};I.push(function(_){$(K.target).html(_).each(J,arguments)})}else if(K.success)I.push(K.success);K.success=function(A,_){for(var B=0,$=I.length;B<$;B++)I[B](A,_,F)};var A=$("input:file",this).fieldValue(),L=false;for(var G=0;G<A.length;G++)if(A[G])L=true;if(K.iframe||L){if($.browser.safari&&K.closeKeepAlive)$.get(K.closeKeepAlive,C);else C()}else $.ajax(K);this.trigger("form-submit-notify",[this,K]);return this;function C(){var D=F[0];if($(":input[name=submit]",D).length){alert("Error: Form elements must not be named \"submit\".");return}var _=$.extend({},$.ajaxSettings,K),L="jqFormIO"+(new Date().getTime()),J=$("<iframe id=\""+L+"\" name=\""+L+"\" />"),I=J[0];if($.browser.msie||$.browser.opera)I.src="javascript:false;document.write(\"\");";J.css({position:"absolute",top:"-1000px",left:"-1000px"});var N={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},A=_.global;if(A&&!$.active++)$.event.trigger("ajaxStart");if(A)$.event.trigger("ajaxSend",[N,_]);var G=0,M=0,B=D.clk;if(B){var E=B.name;if(E&&!B.disabled){K.extraData=K.extraData||{};K.extraData[E]=B.value;if(B.type=="image"){K.extraData[name+".x"]=D.clk_x;K.extraData[name+".y"]=D.clk_y}}}setTimeout(function(){var B=F.attr("target"),E=F.attr("action");F.attr({target:L,encoding:"multipart/form-data",enctype:"multipart/form-data",method:"POST",action:_.url});if(_.timeout)setTimeout(function(){M=true;C()},_.timeout);var A=[];try{if(K.extraData)for(var G in K.extraData)A.push($("<input type=\"hidden\" name=\""+G+"\" value=\""+K.extraData[G]+"\" />").appendTo(D)[0]);J.appendTo("body");I.attachEvent?I.attachEvent("onload",C):I.addEventListener("load",C,false);D.submit()}finally{F.attr("action",E);B?F.attr("target",B):F.removeAttr("target");$(A).remove()}},10);function C(){if(G++)return;I.detachEvent?I.detachEvent("onload",C):I.removeEventListener("load",C,false);var D=0,L=true;try{if(M)throw"timeout";var K,F;F=I.contentWindow?I.contentWindow.document:I.contentDocument?I.contentDocument:I.document;if(F.body==null&&!D&&$.browser.opera){D=1;G--;setTimeout(C,100);return}N.responseText=F.body?F.body.innerHTML:null;N.responseXML=F.XMLDocument?F.XMLDocument:F;N.getResponseHeader=function(A){var $={"content-type":_.dataType};return $[A]};if(_.dataType=="json"||_.dataType=="script"){var E=F.getElementsByTagName("textarea")[0];N.responseText=E?E.value:N.responseText}else if(_.dataType=="xml"&&!N.responseXML&&N.responseText!=null)N.responseXML=H(N.responseText);K=$.httpData(N,_.dataType)}catch(B){L=false;$.handleError(_,N,"error",B)}if(L){_.success(K,"success");if(A)$.event.trigger("ajaxSuccess",[N,_])}if(A)$.event.trigger("ajaxComplete",[N,_]);if(A&&!--$.active)$.event.trigger("ajaxStop");if(_.complete)_.complete(N,L?"success":"error");setTimeout(function(){J.remove();N.responseXML=null},100)}function H($,_){if(window.ActiveXObject){_=new ActiveXObject("Microsoft.XMLDOM");_.async="false";_.loadXML($)}else _=(new DOMParser()).parseFromString($,"text/xml");return(_&&_.documentElement&&_.documentElement.tagName!="parsererror")?_:null}}};$.fn.ajaxForm=function(_){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){$(this).ajaxSubmit(_);return false}).each(function(){$(":submit,input:image",this).bind("click.form-plugin",function(_){var A=this.form;A.clk=this;if(this.type=="image")if(_.offsetX!=undefined){A.clk_x=_.offsetX;A.clk_y=_.offsetY}else if(typeof $.fn.offset=="function"){var B=$(this).offset();A.clk_x=_.pageX-B.left;A.clk_y=_.pageY-B.top}else{A.clk_x=_.pageX-this.offsetLeft;A.clk_y=_.pageY-this.offsetTop}setTimeout(function(){A.clk=A.clk_x=A.clk_y=null},10)})})};$.fn.ajaxFormUnbind=function(){this.unbind("submit.form-plugin");return this.each(function(){$(":submit,input:image",this).unbind("click.form-plugin")})};$.fn.formToArray=function(D){var B=[];if(this.length==0)return B;var A=this[0],F=D?A.getElementsByTagName("*"):A.elements;if(!F)return B;for(var G=0,_=F.length;G<_;G++){var K=F[G],C=K.name;if(!C)continue;if(D&&A.clk&&K.type=="image"){if(!K.disabled&&A.clk==K)B.push({name:C+".x",value:A.clk_x},{name:C+".y",value:A.clk_y});continue}var H=$.fieldValue(K,true);if(H&&H.constructor==Array){for(var E=0,I=H.length;E<I;E++)B.push({name:C,value:H[E]})}else if(H!==null&&typeof H!="undefined")B.push({name:C,value:H})}if(!D&&A.clk){var L=A.getElementsByTagName("input");for(G=0,_=L.length;G<_;G++){var J=L[G],C=J.name;if(C&&!J.disabled&&J.type=="image"&&A.clk==J)B.push({name:C+".x",value:A.clk_x},{name:C+".y",value:A.clk_y})}}return B};$.fn.formSerialize=function(_){return $.param(this.formToArray(_))};$.fn.fieldSerialize=function(A){var _=[];this.each(function(){var D=this.name;if(!D)return;var B=$.fieldValue(this,A);if(B&&B.constructor==Array){for(var E=0,C=B.length;E<C;E++)_.push({name:D,value:B[E]})}else if(B!==null&&typeof B!="undefined")_.push({name:this.name,value:B})});return $.param(_)};$.fn.fieldValue=function(D){for(var _=[],E=0,B=this.length;E<B;E++){var C=this[E],A=$.fieldValue(C,D);if(A===null||typeof A=="undefined"||(A.constructor==Array&&!A.length))continue;A.constructor==Array?$.merge(_,A):_.push(A)}return _};$.fieldValue=function(J,K){var F=J.name,I=J.type,C=J.tagName.toLowerCase();if(typeof K=="undefined")K=true;if(K&&(!F||J.disabled||I=="reset"||I=="button"||(I=="checkbox"||I=="radio")&&!J.checked||(I=="submit"||I=="image")&&J.form&&J.form.clk!=J||C=="select"&&J.selectedIndex==-1))return null;if(C=="select"){var _=J.selectedIndex;if(_<0)return null;var D=[],L=J.options,E=(I=="select-one"),A=(E?_+1:L.length);for(var G=(E?_:0);G<A;G++){var B=L[G];if(B.selected){var H=$.browser.msie&&!(B.attributes["value"].specified)?B.text:B.value;if(E)return H;D.push(H)}}return D}return J.value};$.fn.clearForm=function(){return this.each(function(){$("input,select,textarea",this).clearFields()})};$.fn.clearFields=$.fn.clearInputs=function(){return this.each(function(){var $=this.type,_=this.tagName.toLowerCase();if($=="text"||$=="password"||_=="textarea")this.value="";else if($=="checkbox"||$=="radio")this.checked=false;else if(_=="select")this.selectedIndex=-1})};$.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType))this.reset()})};$.fn.enable=function($){if($==undefined)$=true;return this.each(function(){this.disabled=!$})};$.fn.select=function(_){if(_==undefined)_=true;return this.each(function(){var A=this.type;if(A=="checkbox"||A=="radio")this.checked=_;else if(this.tagName.toLowerCase()=="option"){var B=$(this).parent("select");if(_&&B[0]&&B[0].type=="select-one")B.find("option").select(false);this.selected=_}})};function _(){if($.fn.ajaxSubmit.debug&&window.console&&window.console.log)window.console.log("[jquery.form] "+Array.prototype.join.call(arguments,""))}})(jQuery)